<ion-chip button (click)="directoryChange.emit(directory.id)">
  <ion-icon
    id="{{ directory.name }}-trigger"
    size="large"
    class="file-icon"
    name="folder"
    [color]="
      directory.accessLevel === 1
        ? 'tertiary'
        : directory.accessLevel === 2
        ? 'secondary'
        : 'success'
    "
    (click)="directoryChange.emit(directory.id)"
  ></ion-icon>
  <ion-label (click)="directoryChange.emit(directory.id)">
    {{ directory.name }}
  </ion-label>
</ion-chip>

<ion-popover
  trigger="{{ directory.name }}-trigger"
  triggerAction="context-menu"
  [dismissOnSelect]="true"
>
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item button (click)="showDetails.emit()">
          <ion-label class="primary">
            {{ "_common.details" | translate }}
          </ion-label>
        </ion-item>
        <ng-container *ngIf="isOwner">
          <ng-container *ngIf="!directory.isDeleted; else deletedOptions">
            <ion-item button (click)="openDirectoryEdit()">
              <ion-label class="secondary">
                {{ "_common.edit" | translate }}
              </ion-label>
            </ion-item>
            <ion-item button (click)="addDirectoryCut()">
              <ion-label class="warning">
                {{ "_common.cut" | translate }}
              </ion-label>
            </ion-item>
            <ion-item button (click)="confirmDeleteDirectory()">
              <ion-label class="danger">
                {{ "_common.delete" | translate }}
              </ion-label>
            </ion-item>
          </ng-container>
          <ng-template #deletedOptions>
            <ion-item button (click)="restoreDirectory()">
              <ion-label class="secondary">
                {{ "_common.restore" | translate }}
              </ion-label>
            </ion-item>
            <ion-item button (click)="confirmPermanentDeleteDirectory()">
              <ion-label class="danger">
                {{ "_common.permanentDelete" | translate }}
              </ion-label>
            </ion-item>
          </ng-template>
        </ng-container>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>
